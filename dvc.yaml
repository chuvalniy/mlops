stages:
  clean_data:
    cmd: python src/data/clean_data.py data/raw/smoking_driking_dataset_Ver01.csv data/interim/cleaned_data.csv
    deps:
      - data/raw/smoking_driking_dataset_Ver01.csv
      - src/data/clean_data.py
    outs:
      - data/interim/cleaned_data.csv

  remove_duplicates:
    cmd: python src/data/clean_data.py data/interim/cleaned_data.csv data/interim/remove_duplicates.csv
    deps:
      - data/interim/cleaned_data.csv
      - src/data/remove_duplicates.py
    outs:
      - data/interim/remove_duplicates.csv

  remove_outliers:
    cmd: python src/data/remove_outliers.py data/interim/remove_duplicates.csv data/interim/cleaned_data_iqr.csv
    deps:
      - data/interim/remove_duplicates.csv
      - src/data/remove_outliers.py
    outs:
      - data/interim/cleaned_data_iqr.csv

  one_hot_encode_data:
    cmd: python src/data/encode_data.py data/interim/cleaned_data_iqr.csv data/processed/processed_data.csv
    deps:
      - data/interim/cleaned_data_iqr.csv
      - src/data/encode_data.py
    outs:
      - data/processed/processed_data.csv

  prepare_datasets:
    cmd: python src/models/prepare_datasets.py data/processed/processed_data.csv data/processed/train.csv data/processed/val.csv
    deps:
      - data/processed/processed_data.csv
      - src/models/prepare_datasets.py
    outs:
      - data/processed/train.csv
      - data/processed/val.csv

  train_model:
    cmd: python src/models/train_model.py data/processed/train.csv data/processed/val.csv reports/metrics.json models/model.clf
    deps:
      - data/processed/val.csv
      - data/processed/train.csv
      - src/models/train_model.py
    outs:
      - models/model.clf
      - reports/metrics.json

